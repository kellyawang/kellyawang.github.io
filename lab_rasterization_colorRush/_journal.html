<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>7 - Rasterization: Development Journal</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">7 - Rasterization
   </div>
   <div id="projectbrief">David Yan and Kelly Wang</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Development Journal </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#S20141111">2014-11-11: Tuesday</a></li>
<li class="level1"><a href="#S20141110">2014-11-10: Monday</a></li>
<li class="level1"><a href="#Sunday">11/9/2014</a><ul><li class="level2"><a href="#spin">Adding Detail to Entity behavior</a></li>
<li class="level2"><a href="#variety">Adding variety to levels</a></li>
<li class="level2"><a href="#list">List of goals:</a></li>
</ul>
</li>
<li class="level1"><a href="#Saturday">11/8/2014</a><ul><li class="level2"><a href="#models">Making Aesthetic Choices</a></li>
<li class="level2"><a href="#powerup">Adding powerups</a></li>
</ul>
</li>
<li class="level1"><a href="#Friday">11/7/2014</a></li>
<li class="level1"><a href="#Thursday">11/6/2014</a><ul><li class="level2"><a href="#dy1">Implementing screen stats</a></li>
</ul>
</li>
<li class="level1"><a href="#kw6-1">Schedule</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="S20141111"></a>
2014-11-11: Tuesday</h1>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='2014-11-11_006_rasterization-pickmeup_r4320_g3d_r5474__Establish2.mp4'><img src='2014-11-11_006_rasterization-pickmeup_r4320_g3d_r5474__Establish2.mp4' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Establish2</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="2014-11-11_006_rasterization-pickmeup_r4320_g3d_r5474__Establish2.mp4" alt="2014-11-11_006_rasterization-pickmeup_r4320_g3d_r5474__Establish2.mp4"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='2014-11-11_005_rasterization-pickmeup_r4320_g3d_r5474__Establish1.mp4'><img src='2014-11-11_005_rasterization-pickmeup_r4320_g3d_r5474__Establish1.mp4' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Establish1</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="2014-11-11_005_rasterization-pickmeup_r4320_g3d_r5474__Establish1.mp4" alt="2014-11-11_005_rasterization-pickmeup_r4320_g3d_r5474__Establish1.mp4"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='2014-11-11_003_rasterization-pickmeup_r4320_g3d_r5474__Footage2.mp4'><img src='2014-11-11_003_rasterization-pickmeup_r4320_g3d_r5474__Footage2.mp4' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Footage2</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="2014-11-11_003_rasterization-pickmeup_r4320_g3d_r5474__Footage2.mp4" alt="2014-11-11_003_rasterization-pickmeup_r4320_g3d_r5474__Footage2.mp4"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>List of powerups for the instruction pages:</p>
<ul>
<li>
Square barriers: -15 points, -1 life  </li>
<li>
Long Wall: -20 points, -1 life, -2 jumps  </li>
<li>
Press 's' to cash in at any time; any greens will add jumps, any yellows will add lives  </li>
<li>
Green: +25 pts  </li>
<li>
Blue: +50 points  </li>
<li>
Yellow: +100 points, adds a life for every yellow collected  </li>
<li>
2 Blue 1 Green: FLY  </li>
<li>
3 Green: ADD 5 JUMPS  </li>
</ul>
<p>I also created an 'establishing shot' scene to manually capture the first shot of our trailer, recorded some footage to use in the trailer to emphasize the icosahedron, and give it character.</p>
<p>&ndash;Kelly</p>
<p>Working from Cali. Unfortunately G3D is broken on my machine so I'm doing whatever I can to assist Kelly without directly touching the code. This includes filling out more of the report, making sure all materials are up to spec, etc etc.</p>
<p>&ndash;David</p>
<h1><a class="anchor" id="S20141110"></a>
2014-11-10: Monday</h1>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='2014-11-10_001_rasterization-pickmeup_r4271_g3d_r5474__This_is_your_character.jpg'><img src='2014-11-10_001_rasterization-pickmeup_r4271_g3d_r5474__This_is_your_character.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> This is your character</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="2014-11-10_001_rasterization-pickmeup_r4271_g3d_r5474__This_is_your_character.jpg" alt="2014-11-10_001_rasterization-pickmeup_r4271_g3d_r5474__This_is_your_character.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='2014-11-10_000_rasterization-pickmeup_r4271_g3d_r5474__Current_Gameplay_visuals.jpg'><img src='2014-11-10_000_rasterization-pickmeup_r4271_g3d_r5474__Current_Gameplay_visuals.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Current Gameplay visuals</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="2014-11-10_000_rasterization-pickmeup_r4271_g3d_r5474__Current_Gameplay_visuals.jpg" alt="2014-11-10_000_rasterization-pickmeup_r4271_g3d_r5474__Current_Gameplay_visuals.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>In office hours today, we fixed lighting with help from Morgan; the sun is now a spotlight that follows the camera and thus the player entity. I also decreased sensitivity of the camera to darken the skybox, and increased the spotligt bulb power to light the road. Change shadowMapBias to handle shadows, nearZPlaneLimit shoule be small enough to not confuse the shadowMap, making it try to draw object really far away.</p>
<p>To make light follow the camera: </p><div class="fragment"><div class="line">track = transform (entity(<span class="stringliteral">&quot;camera&quot;</span>), CFrame::fromXYZYPRDegrees(0, 400, 0, 0, -70, 0));</div>
</div><!-- fragment --><p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='2014-11-10_000_rasterization-pickmeup_r4264_g3d_r5474__Collect_Greens.jpg'><img src='2014-11-10_000_rasterization-pickmeup_r4264_g3d_r5474__Collect_Greens.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Collect Greens</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="2014-11-10_000_rasterization-pickmeup_r4264_g3d_r5474__Collect_Greens.jpg" alt="2014-11-10_000_rasterization-pickmeup_r4264_g3d_r5474__Collect_Greens.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>-Kelly</p>
<p>I also implemented Instruction pages that will scroll through teaching the user how to play in the beginning.</p>
<p>m_instruction is true if the instruction tutorial pages are still running, m_running is true if the game is running.</p>
<p>-Kelly</p>
<h1><a class="anchor" id="Sunday"></a>
11/9/2014</h1>
<h2><a class="anchor" id="spin"></a>
Adding Detail to Entity behavior</h2>
<p>I spent some time trying to make a Player Entity rotate in onSimulation. Writing this does not work. We see a quick flash of the scene and then everything disappears.</p>
<div class="fragment"><div class="line"><span class="comment">//Matrix3 pitchRotation (1, 0, 0, 0, 0, -1, 0, 1, 0);</span></div>
<div class="line"><span class="comment">//pitchRotation *= (float)deltaTime;</span></div>
<div class="line"><span class="comment">//m_frame.rotation = pitchRotation;</span></div>
</div><!-- fragment --><p>Playing around a little more with the code, The camera moves for some reason, or the Player entity simply starts moving backwards.</p>
<p>As we have only two days and David will be out of town Monday and Tuesday, this is my ToDo list:</p>
<p>-TRAILER!! Play with splines for that one scene...</p>
<p>-Mainpage: 3 paragraphs about the visuals</p>
<p>-ask Morgan: Spinning entity, title screen with "hit enter to play" Skyboxes in place of the fractal shader</p>
<p>-Display intro pages with instructions: Use the left and right arrows or 'A' 'D' to move left and right &gt; Collect colorful balls but be careful to avoid hitting obstacles! &gt; Different color combos activate different powerups. Collect your colors, and press 'S' to submit when you're done.</p>
<p>-Print to screen patterns</p>
<p>-Gameplay trailer</p>
<p>-change blue, sensitivity, road</p>
<h2><a class="anchor" id="variety"></a>
Adding variety to levels</h2>
<p>Based on some ideas Kelly and I discussed, I decided to add more things to pickup, and also award more powerups. Thanks to the framework I implemented yesterday, system-wise, this was as easy as adding more logic to the switch tables on the game: what to draw, what to check for, etc etc.</p>
<p>We also decided it might be worthwhile to place some pickups on a 2nd 'height' of the game, which is essentially only reachable by jumping or 'flying'.</p>
<p>As a result of all of these changes, the object layout python file has a lot more logic in it now. The idea is still the same as before from the last lab. However, we have made the logic of placing objects significantly more complex (using more random number generators, placing different kinds of objects, placing more objects). That being said, we could now possibly generate many different levels. Random generation isn't great for actual meaningful powerup placement, but it still seems exciting enough.</p>
<p>I'm also considering adding some sort of shield mechanic, though this is not the easiest thing to do. Most shields in games are semi-transparent, so that you can see the player while also noticing the shield. We're currently running into issues implementing transparent models, which also does not take into consideration the fact that we also need to worry about collision interaction between the shield, the player, and all other objects.</p>
<p>&ndash;David</p>
<h2><a class="anchor" id="list"></a>
List of goals:</h2>
<p>Powerups:</p><ul>
<li>Get shield</li>
<li>Add lives</li>
<li>Float in the air (need to add spheres in the air, probably gold type)</li>
</ul>
<p>Craft combinations:</p><ul>
<li>Maybe just blue and green spheres, and only 3 as opposed to 5?</li>
<li>3 Green ==&gt; shield</li>
<li>3 Yellow ==&gt; life</li>
<li>2 Blue 1 Green ==&gt; flight</li>
</ul>
<p>Aesthetics:</p><ul>
<li>Road</li>
<li>Background/skybox</li>
<li>Player character</li>
</ul>
<h1><a class="anchor" id="Saturday"></a>
11/8/2014</h1>
<h2><a class="anchor" id="models"></a>
Making Aesthetic Choices</h2>
<p>I spent some time looking for 3d models to put in our game and also found a nicer song called "Rainbow Rush" from <a href="http://opengameart.org/content/rainbow-rush">http://opengameart.org/content/rainbow-rush</a> by Yubatake, under a Creative Commons license. We originally wanted to have the character animate and run down the road, but we quickly decided it would be easier to simply have a spinning cube or similar simple shape and make it colorful rather than make it look really well modeled.</p>
<p>Another model we were thinking of using was a low poly penguin: <a href="http://opengameart.org/content/pinguin-low-poly">http://opengameart.org/content/pinguin-low-poly</a> and a spaceship: <a href="http://www.turbosquid.com/FullPreview/Index.cfm/ID/531813">http://www.turbosquid.com/FullPreview/Index.cfm/ID/531813</a> and a robot: <a href="http://www.turbosquid.com/3d-models/free-3ds-mode-robot-spike/613288,">http://www.turbosquid.com/3d-models/free-3ds-mode-robot-spike/613288,</a> <a href="http://www.turbosquid.com/FullPreview/Index.cfm/ID/332966">http://www.turbosquid.com/FullPreview/Index.cfm/ID/332966</a>.</p>
<p>For some reason, right now the program runs extremely slowly. It may have something to do with something David implemented just before he left.</p>
<p>-Kelly</p>
<h2><a class="anchor" id="powerup"></a>
Adding powerups</h2>
<p>I implemented the powerup mechanic mentioned yesterday. The powerup storage bar is placed on the bottom left of the screen.</p>
<p>Currently our internal representation of powerup storage is an array of strings. The default state is 'none'. Everytime you hit an object of a certain color, that color is then added into our array at index 0 as a strpmg, and the last object is popped off. This gives the impresseion that the powerup bar is added from left to right. This ensures that the size of our array is at most 6, though we only look for 5 at a time.</p>
<p>After hitting the 's' key (for now), the entire storage is emptied, and we check what rewards to give based on what colors were in our storage bar. It is possible to pre-emptively empty the storage bar, and not get any rewards. We will probably want to have some way to indicating when a user is rewarded for consuming their powerup bar, or notify them that they have a bad configuration of colors in the powerup bar.</p>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='powerups.mp4'><div style='border: 1px solid #00F; width: 180px; height: 120px; background: #222; color: #AAA; text-align: center;'><span style='position: relative; top: 40px; font-size: 100px; '>&#9654;</span><br></br><span style='position: relative; top: 30px;'>Play Video</span></div></a></td></tr><tr><td align='center'><b> Consuming 3+ greens increases life count</b></td></table> </p><div style="display: none; visibility:hidden"> <div class="image">
<img src="powerups.mp4" alt="powerups.mp4"/>
</div>
 </div><p>&ndash; David</p>
<h1><a class="anchor" id="Friday"></a>
11/7/2014</h1>
<p>Added support for a Game over mechanic. We keep track of the total health/number of lives left in <a class="el" href="class_app.html">App</a> and display a message when the player runs out of lives.</p>
<p>I'm also looking for models that fit well with the fractal cartoon shader but we may need to rethink the aestheti of our game! -Kelly</p>
<p>Working on an implementation for the 'crafting' mechanic of our pickups. Since we can only draw rectangles on the 2D ui (besides fonts), I need to rethink how the mechanic looks.</p>
<p>For now, most likely the bar is going to be a long rectangle overlayed with 5 squares. Once you pickup an object of a certain color, one of the squares will light up the appropriate color. Colors are going to be swapped in a queue like manner (once all 5 squares are lit, picking up another item will dequeue on of the squares and enqueue another one).</p>
<p>Given that I feel nervous about passing pointers between <a class="el" href="class_player_entity.html">PlayerEntity</a> and <a class="el" href="_app_8cpp.html">App.cpp</a>, it might be best for now to actually leave this within the scope of <a class="el" href="_app_8cpp.html">App.cpp</a></p>
<p>-David</p>
<h1><a class="anchor" id="Thursday"></a>
11/6/2014</h1>
<h2><a class="anchor" id="dy1"></a>
Implementing screen stats</h2>
<p>Turns out that implementing GUI stats on the screen really isn't that hard. I basically made a buffoon of myself by trying to replicate the 4-GPU lab and drawing onto the frame buffer. In reality, it's as simple as</p>
<div class="fragment"><div class="line"><span class="comment">// onGraphics3D</span></div>
<div class="line">renderDevice-&gt;push2dD();</div>
<div class="line">...</div>
<div class="line">doStuffHere</div>
<div class="line">...</div>
<div class="line">renderDevice-&gt;pop2D();</div>
</div><!-- fragment --><p>Here's a preliminary screenshot.</p>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='2D_elements.jpg'><img src='2D_elements.jpg' border='1' height='120'></img></a></td></tr><tr><td align='center'><b> Now for other 2D primitive shapes.</b></td></table> <script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="2D_elements.jpg" alt="2D_elements.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>TODO: Work on crafting system / healthbar / actually meaningful statistics.</p>
<p>&ndash;David</p>
<h1><a class="anchor" id="kw6-1"></a>
Schedule</h1>
<p>Friday</p>
<p>Kelly - Implement control input (player movement)</p>
<p>David - Figure out how to implement a pixel shader into a G3D scene file.</p>
<p>Saturday</p>
<p>David - basic game environment with pixel shader, place a player.</p>
<p>Kelley - put objects on screen? David will come help with GUIs/Intro pages</p>
<p>Sunday</p>
<p>Minimum Viable Product</p>
<p>-Start adding gameplay features/mechanisms</p>
<p>Monday</p>
<p>David - Special powerups etc...</p>
<p>Kelly - Work on trailer + videos</p>
<p>Tuesday</p>
<p>Complete report. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Oct 18 2015 16:26:39 for 7 - Rasterization by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
