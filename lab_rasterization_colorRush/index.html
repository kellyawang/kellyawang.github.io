<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>7 - Rasterization: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">7 - Rasterization
   </div>
   <div id="projectbrief">David Yan and Kelly Wang</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">7 - Rasterization Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#report">Report</a><ul><li class="level2"><a href="#over">Game Overview</a><ul><li class="level3"><a href="#Visuals">Overview</a></li>
<li class="level3"><a href="#viz">Implementing Visuals</a></li>
<li class="level3"><a href="#mech">Mechanics Overview</a></li>
</ul>
</li>
<li class="level2"><a href="#imple">Implementation</a></li>
<li class="level2"><a href="#interact">Implementing Interaction</a></li>
<li class="level2"><a href="#trailer">Trailer</a></li>
<li class="level2"><a href="#walkthrough">Gameplay Film</a></li>
</ul>
</li>
<li class="level1"><a href="#credits">Acknowledgements</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="report"></a>
Report</h1>
<h2><a class="anchor" id="over"></a>
Game Overview</h2>
<h3><a class="anchor" id="Visuals"></a>
Overview</h3>
<p>We settled on a whimsical theme for our final game, with simple shapes and rainbow colors. Since the central mechanic of our game is uniting colors in certain patterns to aid the gameplay, we emphasized distinct colors and chose a background that really enhanced the colors in our characters. So the pinks and blues in the sky are reflected in the pink player character and blue spheres that the player can collect.</p>
<p>Our game started out with a very dark aesthetic with a lot of greens and teals, but that made it hard for the player to see when to jump and where objects were in the field. The obstacles were originally black, which made it hard to see where the shadows were, so we changed it to a lighter color. Our brighter scene and our distinct colors alleviate this problem. Our game from last week also had a spaceship as the player character, however we quickly noticed it did not make sense for a spaceship to be jumping around, so instead we decided to completely abstract our scene and have our character be a simple, animated shape.</p>
<p>Our original vision for this week included using the fractal cartoon shader as our infinite road:</p>
<p> <a href='fractalcartoon.jpg'><img src='fractalcartoon.jpg' border='1' height='120'/></a><script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="fractalcartoon.jpg" alt="fractalcartoon.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<p>So this shader informed many of our color choices, and the choice of simple, cartoon-y and block-like shapes. However, we noticed that the outlines in the background, and the chaotic colors were maybe too confusing if our objective for this project was a game with clear interaction. So we decided to go with the more muted and harmonious colors and a simple clean skybox.</p>
<p> <a href='screencap1.jpg'><img src='screencap1.jpg' border='1' height='120'/></a><script>document.write('<div style=\'display: none; visibility: hidden;\'>');</script>  </p><div class="image">
<img src="screencap1.jpg" alt="screencap1.jpg"/>
</div>
<p>  <script>document.write('</div>');</script> </p>
<h3><a class="anchor" id="viz"></a>
Implementing Visuals</h3>
<p>Much of the color scheme is coded into each of the models themselves. After deciding on a set of visual themes indicated above, we decided that it would be best to keep everything the same color throughout the entire game. Originally, we were considering having objects that shifted color, but after seeing the fractal cartoon shader in action, we felt that this was too distracting and would prevent the player from focusing on the game.</p>
<p>That being said, to encourage players to pick up the yellow orbs in particular, we made the orb emissive to visually stand out from the rest of the more matte colors of the game. This really makes them shine and make the player want to get them.</p>
<p>All of the player stats are loaded using a GFont. We chose the specific text 'carbon' from G3D's internal list of fonts as it was a curvey sans serif font that wasn't too cartoony. This way, the status bar did not feel like it was vying for visual attention over the game itself.</p>
<h3><a class="anchor" id="mech"></a>
Mechanics Overview</h3>
<p>Similar to Temple Run, the player automatically moves forward, and can only move a limited amount either left or right. Movement is not limited in discrete 'lanes' as in the iOS game, but however, is restricted so that the player can't move off of the screen. The game's main focus is on collision with other objects. Any collision with black objects is bad, and reduces your total points score. Any collision with other colored objects is good and awards you points as well as fills up a powerup bar. The powerup bar fills one square with a color based on what color object you picked up. The player may then consume the powerup bar, and based on the combination of colors in the bar, it may award certain perks like an extra life, etc. Unlike TempleRun, We also implemented a jump mechanic, with simulated gravity, to allow the player to jump every once in a while to avoid colliding with anything. However, you can only use the jump a limited amount of times, thus encouraging players to actually play the game as opposed to jumping trying to avoid every single object in our simulated 'ground'.</p>
<h2><a class="anchor" id="imple"></a>
Implementation</h2>
<h2><a class="anchor" id="interact"></a>
Implementing Interaction</h2>
<p>We imported the <a class="el" href="class_player_entity.html">PlayerEntity</a>, <a class="el" href="class_physics_scene.html">PhysicsScene</a>, and <a class="el" href="class_app.html">App</a> from the simpleGame sample provided in G3d's internal library, which provided basically everything we needed to make our game.</p>
<p>In <a class="el" href="class_app.html#a57d158969fc2678b47fc3f68d89c3d57">App::onUserInput()</a>, we disabled user input to move in the forward direction, and in its place provided a constant forward velocity (forward in our case is in the -z direction). We still allowed the player to move left and right and backwards, and also jump, which we all address later.</p>
<p>In <a class="el" href="class_player_entity.html">PlayerEntity</a>, we added several global variables such as m_points or m_jumps, so that the player keeps track of the game statistics. Within <a class="el" href="_player_entity_8h.html">PlayerEntity.h</a>, we also added several public and simple set/get methods to modify or retrieve those game stats.</p>
<p>Game stats are displayed using <a class="el" href="class_app.html#abb18e651e2356ff445c0d2a604877941">App::showGameStats</a>. This simply retrieves the render device, and then draws 2D onto the frame buffer. This includes words, as well as the "powerup bar" which we will discuss in more detail later.</p>
<p>We used inspiration for the <a class="el" href="class_player_entity.html">PlayerEntity</a> defined in the Entity sample program to clamp player movement. This not only prevents the player from off of the screen in any direction, but it also had the added bonus of creating artificial "ground". PhysicScene implements gravity in our game and we want this for a jump mechanic. If we couldn't bound Y axis movement, the player model would naturally just fall off of the screen due to gravity. Like the <a class="el" href="class_player_entity.html">PlayerEntity</a> model in Entity, this is done by setting a max displacement MAX_POS as a Point3(x, y, z) to describe how much movement you want from the CFrame origin. in <a class="el" href="class_player_entity.html#ab66ca1aa176d2f3be0281fda5a9f2893">PlayerEntity::onSimulation()</a>, at the end of the method, simply add</p>
<div class="fragment"><div class="line">m_frame.translation = m_frame.translation.clamp(Point3(-MAX_POS.x, 0, -MAX_POS.z), MAX_POS);</div>
</div><!-- fragment --><p>Unlike Temple Run, we have a jump mechanic. Luckily the jump mechanic has already been implemented, and all we need to is query the <a class="el" href="class_player_entity.html">PlayerEntity</a> for the amount of legal jumps we are allowed to make to decide whether or not our key input (currently spacebar) is allowed to trigger a jump.</p>
<p>Sound generation is fairly simple in G3D and can be created/called using these two lines of code. Just modify logic of when to play the sound after you have loaded the relevant sound files in <a class="el" href="class_app.html#a383cf8e8949745f9b2b10651b27d1724">App::onInit()</a>.</p>
<div class="fragment"><div class="line">someSound = Sound::create(System::findDataFile(<span class="stringliteral">&quot;someFile.mp3&quot;</span>));</div>
<div class="line">someSound-&gt;play();</div>
</div><!-- fragment --><p>Rather than use <a class="el" href="class_player_entity.html">PlayerEntity</a>'s given collision detection, which was far more complexity than we needed, we created our own simplistic collision detection in <a class="el" href="class_app.html#a51040dda7105b7c58f4f53a546f724c8">App::onSimulation()</a>. We decided that all game interactable objects would be Visible Objects. Now, we get the <a class="el" href="class_player_entity.html">PlayerEntity</a>'s bounding sphere, as well as an array of all other VisibleEntity's in our game, and get the bounding sphere of each VisibleEntity.</p>
<p>Visibility defines existence in our world. Thus if the object is not visible, we do not consider it for collision. Thus to remove objects from our world after collision, simply set the given VisibleEntity isVisible attribute to false.</p>
<p>If the bound spheres intersect between a <a class="el" href="class_player_entity.html">PlayerEntity</a> and a VisibleEntity, we check the name of which VisibleEntity intersected our player sphere. All of our game collision logic happens. For example if the VisibleEntity name contains "green", we add points and a jump. If it contains "barrier", we deduct points.</p>
<p>The 'powerup bar' is a G3D::Array that stores strings that we keep fixed at max size 4, and is stored in <a class="el" href="_app_8cpp.html">App.cpp</a> as a global variable m_powerups. The string is either some color, or it is "none". Depending on what the string is, we will then draw a square on the powerup bar UI with that given color ("none" correlates to black). Colors are added bar in a 'queue' like manner. That is, we add to index 0 and then pop the last element, thus keeping a strict size on the array.</p>
<p>When the user presses a button to "consume" the powerup bar, we call <a class="el" href="class_app.html#a8711fae6e698aa66a48af19dd7bbc398">App::consumePowerups</a>. In this method, we count all values in our powerup bar G3D::Array. Depending on the number of each color, we then award perks, or do nothing. In either case, we then "empty" our powerup array by setting all indeces to "none", which effectively empties it.</p>
<p>Objects are placed in the scene file using a Python script which will decide whether or not to place objects at certain intervals. The type of the object determines how frequently the object may appear.</p>
<h2><a class="anchor" id="trailer"></a>
Trailer</h2>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='trailer-film.mp4'><div style='border: 1px solid #00F; width: 180px; height: 120px; background: #222; color: #AAA; text-align: center;'><span style='position: relative; top: 40px; font-size: 100px; '>&#9654;</span><br></br><span style='position: relative; top: 30px;'>Play Video</span></div></a></td></tr><tr><td align='center'><b> Film Trailer</b></td></table> </p><div style="display: none; visibility:hidden"> <div class="image">
<img src="trailer-film.mp4" alt="trailer-film.mp4"/>
</div>
 </div><p>This is our final trailer for our game. In our final product we included an establishing shot, a title page, and shots that introduce the player character and teaches the user the rules of the game. Attribution for each clip we took is provided in the Attribution section of our report.</p>
<p>Video was captured at 720p resolution using G3D's internal video capture feature, and then downscaled and edited to 480p using iMovie.</p>
<h2><a class="anchor" id="walkthrough"></a>
Gameplay Film</h2>
<p> <table style='display:inline-table;' cellspacing='2' cellpadding='0' border='0'><tr><td align='center'><a href='gameplay-film.mp4'><div style='border: 1px solid #00F; width: 180px; height: 120px; background: #222; color: #AAA; text-align: center;'><span style='position: relative; top: 40px; font-size: 100px; '>&#9654;</span><br></br><span style='position: relative; top: 30px;'>Play Video</span></div></a></td></tr><tr><td align='center'><b> Gameplay Trialer</b></td></table> </p><div style="display: none; visibility:hidden"> <div class="image">
<img src="gameplay-film.mp4" alt="gameplay-film.mp4"/>
</div>
 </div><p>We wanted to convey the key components of our game to any viewer, such that they felt like they knew what to do as soon as they finished watching the video.</p>
<p>Video was captured at 720p resolution using G3D's internal video capture feature, and then downscaled and edited to 480p using iMovie.</p>
<h1><a class="anchor" id="credits"></a>
Acknowledgements</h1>
<p>Credit to Devin Gardella for generating the sphere.obj that we used.</p>
<p>We used several sound effects and free images in our game, taken from freesounds.org and G3D's sound library, as well as from sources online. Each of these sfx and images are covered under a Creative Commons license with attribution, which we provide below:</p>
<ul>
<li>
Jump SFX: "bump" by StaneStane (<a href="http://www.freesound.org/people/StaneStane/sounds/73562/">http://www.freesound.org/people/StaneStane/sounds/73562/</a>)  </li>
<li>
Crash SFX: taken from G3D's sound effect library. </li>
<li>
Skybox: "clouds" from red sorceress <a href="http://www.redsorceress.com/skybox.html">http://www.redsorceress.com/skybox.html</a>  </li>
<li>
Background music: "Rainbow Rush" by Yubatake from OpenGameArt: <a href="http://opengameart.org/content/rainbow-rush">http://opengameart.org/content/rainbow-rush</a>  </li>
</ul>
<p>See also your <a class="el" href="_journal.html">Development Journal </a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Oct 18 2015 16:26:39 for 7 - Rasterization by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
